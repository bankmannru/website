<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script type="importmap">
      {
        "imports": {
          "@material/web/": "https://esm.run/@material/web/"
        }
      }
    </script>
    <script type="module">
      import '@material/web/all.js';
      import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
  
      document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <script src="settings.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chipSet = document.querySelector('md-chip-set');
            const products = document.querySelectorAll('.goodsdiv');
            
            function updateFilters() {
                const selectedFilters = Array.from(chipSet.querySelectorAll('md-filter-chip[selected]'))
                    .map(chip => chip.getAttribute('label'));
                
                products.forEach(product => {
                    const description = product.querySelector('.goodsdesc').textContent;
                    const price = product.querySelector('.goodsprice').textContent;
                    
                    if (selectedFilters.includes('Все')) {
                        product.style.display = 'block';
                        return;
                    }
                    
                    const matches = selectedFilters.some(filter => {
                        if (filter === 'До 1000₽') {
                            const priceValue = parseInt(price.replace(/[^\d]/g, ''));
                            return priceValue <= 1000;
                        }
                        if (filter === 'Свыше 1000₽') {
                            const priceValue = parseInt(price.replace(/[^\d]/g, ''));
                            return priceValue > 1000;
                        }
                        return description.includes(filter);
                    });
                    
                    product.style.display = matches ? 'block' : 'none';
                });
            }
            
            chipSet.addEventListener('click', (e) => {
                const chip = e.target.closest('md-filter-chip');
                if (!chip) return;
                
                // Toggle the clicked chip
                if (chip.hasAttribute('selected')) {
                    chip.removeAttribute('selected');
                } else {
                    chip.setAttribute('selected', '');
                }
                
                if (chip.getAttribute('label') === 'Все') {
                    // If "Все" is selected, deselect others
                    chipSet.querySelectorAll('md-filter-chip').forEach(c => {
                        if (c !== chip) c.removeAttribute('selected');
                    });
                } else {
                    // If another filter is selected, deselect "Все"
                    const allChip = chipSet.querySelector('md-filter-chip[label="Все"]');
                    if (allChip) allChip.removeAttribute('selected');
                }
                
                // If no filters are selected, select "Все"
                const selectedChips = chipSet.querySelectorAll('md-filter-chip[selected]');
                if (selectedChips.length === 0) {
                    const allChip = chipSet.querySelector('md-filter-chip[label="Все"]');
                    if (allChip) allChip.setAttribute('selected', '');
                }
                
                updateFilters();
            });
            
            // Initial filter state
            updateFilters();
        });
    </script>
    <div class='header' style="display: flex; align-items: center; justify-content: center;">Мы набираем работников для банк Маннру. 
      <a href="https://forms.gle/GJFTNofAoNCuxMT37" style="margin-left: 10px;">
          <md-filled-tonal-button>
              Подать заявку
              <svg slot="icon" viewBox="0 0 48 48"><path d="M6 40V8l38 16Zm3-4.65L36.2 24 9 12.5v8.4L21.1 24 9 27Zm0 0V12.5 27Z"/></svg>
            </md-filled-tonal-button>
      </a>
  </div>
    <h1 class='head'>Маркет</h1>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Маркет</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nunito:ital,wght@0,200;1,200&family=Onest:wght@100..900&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <md-chip-set style="margin-top: 10px; margin-left: 10px;">
    <md-filter-chip label="Все" selected></md-filter-chip>
    <md-filter-chip label="Карты"></md-filter-chip>
    <md-filter-chip label="До 1000₽"></md-filter-chip>
    <md-filter-chip label="Свыше 1000₽"></md-filter-chip>
    <md-filter-chip label="Новинки"></md-filter-chip>
</md-chip-set>
    <div class="products-container">
        <div class='product-card'>
            <div class='product-container'>
                <div class="product-content">
                    <img class='goodsimg' src="Маркет/testcard.png">
                    <p class='goodstext'>Вторая карта</p>
                    <p class='goodsdesc'>Взять себе вторую карту, если надо.<br>Фильтры: Карты, Свыше 1000₽</p>
                    <p class='goodsprice'>1000₽</p>
                    <md-filled-tonal-button onclick="window.location.href='card_order.html'">
                        Купить
                        <svg slot="icon" viewBox="0 0 48 48"><path d="M14.35 43.95q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm20 0q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm-22.6-33 5.5 11.4h14.4l6.25-11.4Zm-1.5-3H39.7q1.15 0 1.75 1.05.6 1.05 0 2.1L34.7 23.25q-.55.95-1.425 1.525t-1.925.575H16.2l-2.8 5.2h24.55v3h-24.1q-2.1 0-3.025-1.4-.925-1.4.025-3.15l3.2-5.9L6.45 7h-3.9V4H8.4Zm7 14.4h14.4Z"/></svg>
                    </md-filled-tonal-button>
                </div>
            </div>
        </div>
        <div class='product-card'>
            <div class='product-container'>
                <div class="product-content">
                    <img class='goodsimg' src="Маркет/testcard.png">
                    <p class='goodstext'>Тестовый товар</p>
                    <p class='goodsdesc'>Тестовый товар для проверки фильтров.<br>Фильтры: Новинки, До 1000₽</p>
                    <p class='goodsprice'>500₽</p>
                    <md-filled-tonal-button>
                        Купить
                        <svg slot="icon" viewBox="0 0 48 48"><path d="M14.35 43.95q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm20 0q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm-22.6-33 5.5 11.4h14.4l6.25-11.4Zm-1.5-3H39.7q1.15 0 1.75 1.05.6 1.05 0 2.1L34.7 23.25q-.55.95-1.425 1.525t-1.925.575H16.2l-2.8 5.2h24.55v3h-24.1q-2.1 0-3.025-1.4-.925-1.4.025-3.15l3.2-5.9L6.45 7h-3.9V4H8.4Zm7 14.4h14.4Z"/></svg>
                    </md-filled-tonal-button>
                </div>
            </div>
        </div>
    </div>
    <div style="position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px;">
      <md-filled-icon-button onclick="window.location.href='index.html';">
        <md-icon><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg></md-icon>
      </md-filled-icon-button>
      <md-filled-icon-button onclick="window.location.href='market.html';">
        <md-icon><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M160-720v-80h640v80H160Zm0 560v-240h-40v-80l40-200h640l40 200v80h-40v240h-80v-240H560v240H160Zm80-80h240v-160H240v160Zm-38-240h556-556Zm0 0h556l-24-120H226l-24 120Z"/></svg></md-icon>
      </md-filled-icon-button>
      <md-filled-icon-button onclick="window.location.href='sitehistory.html';">
        <md-icon><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M480-120q-138 0-240.5-91.5T122-440h82q14 104 92.5 172T480-200q117 0 198.5-81.5T760-480q0-117-81.5-198.5T480-760q-69 0-129 32t-101 88h110v80H120v-240h80v94q51-64 124.5-99T480-840q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-480q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-120Zm112-192L440-464v-216h80v184l128 128-56 56Z"/></md-icon>
      </md-filled-icon-button>
      <md-filled-icon-button onclick="window.location.href='contacts.html';">
        <md-icon><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M480-400q33 0 56.5-23.5T560-480q0-33-23.5-56.5T480-560q-33 0-56.5 23.5T400-480q0 33 23.5 56.5T480-400ZM320-240h320v-23q0-24-13-44t-36-30q-26-11-53.5-17t-57.5-6q-30 0-57.5 6T369-337q-23 10-36 30t-13 44v23ZM720-80H240q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80Zm0-80v-446L526-800H240v640h480Zm-480 0v-640 640Z"/></md-icon>
      </md-filled-icon-button>
  </div>
</body>
</html>